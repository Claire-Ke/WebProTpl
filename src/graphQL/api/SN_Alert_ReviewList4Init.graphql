#获取所有未复核、已复核的

##import "./SN_Alert.fragment.graphql"

fragment SN_Alert_Fragment_SimilarAlarmTotal on IBMS_SimilarAlarmTotal{
    #警报总数
    alarmTotal,
    #误报次数
    misinformationTotal,
    #故障次数
    malfunctionTotal,
}

fragment SN_Alert_Fragment_IAlarm on IBMS_IAlarm{
    id,
    url,
    title,
    deviceId,
    deviceName,
    #设备厂家名称
    devieceFacturerName,
    #设备分类
    deviceCategory,
    #报警原因
    message,
    #警报级别
    alarmLevel,
    #设备子系统名称
    subsystemName,
    #设备所在地点
    regionName,
    #警报分类
    alarmType,
}

query SN_Alert_ReviewList4Init( $pageIndex: Int = 1, $pageSize: Int = 30, $beginStamptime: String = "1949-10-01 00:00:00", $endStamptime: String = "2949-10-01 00:00:00" ){
    #获取所有未复核
    notReviewedList: ibms_alarm_getAlarmByContent( pageIndex: $pageIndex, pageSize: $pageSize, beginStamptime: $beginStamptime, endStamptime: $endStamptime ){
        #根据条件搜索到的总数
        count,
        #未复核的所有总数
        unCheckedCount,
        data{
            ...SN_Alert_Fragment_IAlarm,

            #报警时间
            unCheckedAlarmTime,

            #过往同类事件发生次数
            similarAlarmTotal{
                ...SN_Alert_Fragment_SimilarAlarmTotal,
            },
        },
    },

    #获取所有已复核
    reviewedList: ibms_alarm_getMisinformationByContent( pageIndex: $pageIndex, pageSize: $pageSize, beginStamptime: $beginStamptime, endStamptime: $endStamptime ){
        #根据条件搜索到的总数
        count,
        #已复核的所有总数
        checkedCount,
        data{
            ...SN_Alert_Fragment_IAlarm,

            #报警时间
            checkedAlarmTime,
            #复核人编号
            checkedAccountId,
            #设备误报原因
            misinformationMessage,
            #复核时间/处理时间
            reviewTime,
            #复核人报告(故障处理)
            report,
            #复核类型
            reviewType,

            #过往同类事件发生次数
            similarAlarmTotal{
                ...SN_Alert_Fragment_SimilarAlarmTotal,
            },
        },
    },
}
